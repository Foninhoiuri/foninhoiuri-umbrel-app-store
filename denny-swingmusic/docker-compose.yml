version: "3.9"
services:
  swingmusic:
    image: ghcr.io/swingmx/swingmusic:latest
    container_name: swingmusic
    volumes:
      - ${APP_DATA_DIR}/music:/music
      - ${APP_DATA_DIR}/config:/config
    ports:
      - "1970:1970"
    environment:
      - INSTALL_FFMPEG=true
    restart: on-failure
    entrypoint: >
      /bin/sh -c "apt-get update &&
                  apt-get install -y ffmpeg &&
                  exec swingmusic"