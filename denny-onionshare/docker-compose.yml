version: '3.9'

services:
  app_proxy:
    environment:
      APP_HOST: denny-onionshare_web_1
      APP_PORT: 8437  # Der feste Port, auf den zugegriffen werden soll
      PROXY_AUTH_ADD: "false"

  web:
    image: davidjosearaujo/onionshare:0.0.1@sha256:49db7ad49e383590f83512b4607b135861ef9b74d4e2400ef53b9cd31f4d0d3b
    restart: on-failure
    ports:
      - "8437:8437"  # Stellt sicher, dass der Port 8437 auf den Host abgebildet wird
    environment:
      - PORT=8437  # Fester Port für den OnionShare-Service
    volumes:
      - ${APP_DATA_DIR}/onionshare-data:/onionshare  # Datenverzeichnis für persistente Daten
    command: ["--port", "8437"]  # Startet den Dienst auf Port 8437
