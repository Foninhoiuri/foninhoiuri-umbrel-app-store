version: '3.9'

networks:
  onionshare_network:
    driver: bridge

services:
  app_proxy:
    image: httpd  # Ersetze dies ggf. mit dem tats√§chlichen Proxy-Image
    environment:
      APP_HOST: web  # Referenziert den `web` Service hier korrekt
      APP_PORT: 8437
      PROXY_AUTH_ADD: "false"
    networks:
      - onionshare_network
    depends_on:
      - web
    ports:
      - "8437:8437"

  web:
    image: davidjosearaujo/onionshare:0.0.1@sha256:49db7ad49e383590f83512b4607b135861ef9b74d4e2400ef53b9cd31f4d0d3b
    restart: on-failure
    networks:
      - onionshare_network
    ports:
      - "8437:8437"
    environment:
      - PORT=8437
    volumes:
      - ${APP_DATA_DIR}/onionshare-data:/onionshare
    command: ["--port", "8437"]
