version: "3.8"

services:
  postgresql:
    image: postgres:16
    container_name: denny-zipline_postgresql
    restart: unless-stopped
    environment:
      POSTGRES_USER: zipline
      POSTGRES_PASSWORD: SuperGeheimesPasswort123!
      POSTGRES_DB: zipline
    volumes:
      - zipline_pg_data:/var/lib/postgresql/data
    networks:
      - zipline_network

  zipline:
    image: ghcr.io/diced/zipline:latest
    container_name: denny-zipline_zipline
    restart: unless-stopped
    depends_on:
      - postgresql
    environment:
      CORE_SECRET: 3b449077187f1150082fb348796e97be22b57fefdbd4a7b18f575b51f65519b7
      DATABASE_URL: "postgres://zipline:SuperGeheimesPasswort123!@postgresql:5432/zipline"
      PORT: 3472
      HOST: "0.0.0.0"
      ALLOWED_DOMAINS: "*"
      USER_DEFAULT_EMAIL: "admin@example.com"
      USER_DEFAULT_PASSWORD: "NochEinSicheresPasswort!"
    ports:
      - "3472:3000"
    networks:
      - zipline_network

volumes:
  zipline_pg_data:

networks:
  zipline_network:
