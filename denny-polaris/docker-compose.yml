version: "3.9"

services:
  polaris:
    image: quay.io/agersant/polaris
    container_name: denny-polaris_web_1
    restart: unless-stopped
    ports:
      - "5000:5000"
    volumes:
      - ./polaris_cache:/var/cache/polaris
      - ./polaris_data:/var/lib/polaris
    environment:
      - POLARIS__LISTEN_ADDR=0.0.0.0
      - POLARIS__PORT=5000
    user: "1000:1000"
    entrypoint: >
      sh -c "mkdir -p /var/cache/polaris/peaks && chmod -R 777 /var/cache/polaris && exec /polaris"
