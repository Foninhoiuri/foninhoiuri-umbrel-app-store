version: '3.7'

services:
  app_proxy:
    environment:
      APP_HOST: denny-polaris_web_1
      APP_PORT: 5050

  web:
    image: quay.io/connectical/polaris
    restart: on-failure
    user: "1000:1000"  
    container_name: denny-polaris_web_1  # Fester Name fÃ¼r den Container
    volumes:
      - ${APP_DATA_DIR}/data/my/music/directory:/music
      - ${APP_DATA_DIR}/data/my/polaris/cache:/var/cache/polaris
      - ${APP_DATA_DIR}/data/my/polaris/data:/var/lib/polaris
    entrypoint: >
      sh -c "mkdir -p /var/cache/polaris/peaks && chmod -R 777 /var/cache/polaris || true && exec /polaris"
