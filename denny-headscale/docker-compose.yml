version: '3.7'

services:
  headscale:
    container_name: headscale
    image: headscale/headscale:latest
    command: serve # Führt den Headscale-Dienst aus
    restart: unless-stopped
    ports:
        - 8380:8080 # Port für Headscale-Dienst geändert auf 8380
        - 9299:9090 # Port für Monitoring/Metriken
    volumes:
      - ${APP_DATA_DIR}/config:/etc/headscale/
      - ${APP_DATA_DIR}/data:/var/lib/headscale

  headscale-ui:
    container_name: headscale-ui
    image: ghcr.io/gurucomputing/headscale-ui:latest
    pull_policy: always
    restart: unless-stopped
    ports:
        - 9380:80 # Port für die Headscale-UI bleibt bei 9380
