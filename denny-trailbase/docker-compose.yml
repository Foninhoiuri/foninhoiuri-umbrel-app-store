version: '3.7'

services:
  app_proxy:
    environment:
      APP_HOST: denny-trailbase_web_1
      APP_PORT: 4000

  web:
    image: trailbase/trailbase:0.14.1@sha256:61b87d51a1d9cdc0710cd184a7ee931d639bd964283906bea4738fb60a519179
    restart: on-failure
    environment:
      # Override the default env-logger.
      # RUST_LOG: "info,refinery_core=warn"
      RUST_BACKTRACE: "1"
    command: "/app/trail --data-dir /app/traildepot run --address 0.0.0.0:4400"
    volumes:
      - ${APP_DATA_DIR}/data/traildepot:/app/traildepot
