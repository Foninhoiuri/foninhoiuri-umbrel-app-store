services:
  peertube:
    image: chocobozzz/peertube:v6.3.2-bookworm@sha256:0aab2864739b3abbbcc32b58026432cafa2fba37954e36406134b1a6d721f236
    container_name: peertube_peertube
    ports:
      - "9944:9000"
    volumes:
      - ${APP_DATA_DIR}/data/config:/config
      - ${APP_DATA_DIR}/data/videos:/data
    environment:
      - TZ="Europe/Berlin"
      - PT_INITIAL_ROOT_PASSWORD=password
      - PEERTUBE_WEBSERVER_HOSTNAME=ip
      - PEERTUBE_WEBSERVER_PORT=port
      - PEERTUBE_WEBSERVER_HTTPS=false
      - PEERTUBE_DB_USERNAME=peertube
      - PEERTUBE_DB_PASSWORD=peertube
      - PEERTUBE_DB_HOSTNAME=postgres
      - POSTGRES_DB=peertube
      - POSTGRES_USER=postgres
      - POSTGRES_PASSWORD=postgres
      - PEERTUBE_REDIS_HOSTNAME=redis
      - PEERTUBE_ADMIN_EMAIL=himself@christian-knedel.de
      - PEERTUBE_SECRETS_PEERTUBE=3465e7113cae7fd08bd9d64b8f3c42a9
    depends_on:
      - postgres
      - redis
    restart: "on-failure"
    networks:
      - peertube
