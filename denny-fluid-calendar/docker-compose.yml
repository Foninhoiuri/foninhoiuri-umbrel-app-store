version: '3.7'

services:
  app_proxy:
    environment:
      APP_HOST: denny-fluid-calendar_web_1
      APP_PORT: 3000

  web:
    image: eibrahim/fluid-calendar:latest@sha256:2ab80c302d7a06333ba3b8a7f12d749ae8dc4c2bc93f143defc7f3ddb5876bb8
    environment:
      - NODE_ENV=production
      # DATABASE_URL=file:/app/prisma/dev.db
      - NEXTAUTH_URL=http://${DEVICE_DOMAIN_NAME}:3377
      - NEXTAUTH_SECRET=EuD+O86L1A+UwitsXwLP41FqC5Nvtm4ZOSFhc4clwVY=
    restart: on-failure
    volumes:
      - ${APP_DATA_DIR}/data/app:/app
      - ${APP_DATA_DIR}/data/prisma-data:/app/prisma