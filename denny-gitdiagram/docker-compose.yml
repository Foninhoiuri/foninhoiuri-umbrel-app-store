version: '3.7'

services:
  app_proxy:
    environment:
      APP_HOST: denny-gitdiagram_web_1
      APP_PORT: 8000

  web:
    image: dennysubke/gitdiagram:1.0@sha256:8610a55e4afc62cd4463e5cb26c14640e36930d00c585ca37f87c576afb6c1b5
    environment:
      - ENVIRONMENT=${ENVIRONMENT:-development}
      - NEXT_PUBLIC_API_DEV_URL=http://localhost:8000
    restart: on-failure
    volumes:
      - ${APP_DATA_DIR}/data/backend:/app