version: '3.7'

services:
  app_proxy:
    environment:
      APP_HOST: denny-gitdiagram_web_1
      APP_PORT: 8000

  web:
    image: dennysubke/gitdiagram:1.0@sha256:3aaac9a2cf0167b5c2b94ca14979ec5d883e064c2034ea313d2813b1d61c13cc
    environment:
      - ENVIRONMENT=${ENVIRONMENT:-development}
      - NEXT_PUBLIC_API_DEV_URL=http://localhost:8000
    restart: on-failure
    volumes:
      - ${APP_DATA_DIR}/data/backend:/app
